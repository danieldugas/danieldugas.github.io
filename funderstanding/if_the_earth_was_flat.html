<!DOCTYPE html>
<html>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PP4068J99C"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PP4068J99C');
</script>
<!-- end of GA -->
<title>If The Earth Was Flat</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<style>
body,h1 {font-family: "Raleway", Arial, sans-serif}
h1 {letter-spacing: 6px}
.w3-row-padding img {margin-bottom: 12px}
</style>
<body>

<!-- !PAGE CONTENT! -->
<div class="w3-content" style="max-width:1500px">

<!-- Header -->
<header class="w3-panel w3-center w3-opacity" style="padding:28px 16px">
  <h1 class="w3-xlarge">FUN, MODELS & PEDANTRY</h1>
  <h1>The Funderstanding Series</h1>

  <div class="w3-padding-32">
    <div class="w3-bar w3-border">
      <a href="../index.html" class="w3-bar-item w3-button">dugas.ch</a>
      <a href="../blog.html" class="w3-bar-item w3-button">/ Blog</a>
      <a href="./index.html" class="w3-bar-item w3-button">/ Funderstanding</a>
      <a href="#" class="w3-bar-item w3-button w3-light-grey">/ If The Earth Was Flat</a>
    </div>
  </div>
</header>

<!-- Photo Grid -->
<div class="w3-row-padding" style="margin-bottom:128px;max-width:1000px">
  <h1>If The Earth Was Flat...</h1>
  <p style="font-size:130%;">
    Some time ago, I was told that the model in my head,
    which represents our beautiful planet as a spheroid, was a naive, dirty lie.
    The earth is flat! And <i>they</i> don't want us to find the edge. Undeniable. Fascinating!
  </p>
  <p style="font-size:130%;">
    Well, maybe not so fascinating.
    The arguments presented didn't exactly manage to shake the foundations of my world, and sadly enough, my earth stays round.
    But a pretty interesting question did linger: what would it <i>feel</i> like to live on a disc-world?
  </p>
  <p style="font-size:130%;">
    What follows is my attempt to answer this question.
  </p>
  <h3>Edgy Theories</h3>
  <p style="font-size:130%;">
    The first troubles appeared along with Newton's theory of gravity:
    reading disc world texts, one would think that falling off the edge of the world is a real and terrifying possibility.
    But we <i>pedants</i> know that the gravity field at the edge of a disc-shaped mass would pull you towards the disc.
    This is because gravity pulls you towards mass (the disc) and not just <i>down</i>.
    Which means you would be able to stand proudly on the edge, and even jump over to the other side.
  </p>
  <img src="./img/flat_earth/onedge.png" style="width:30%" title="Early cave drawings indicate that disc-world ancestors, uncorrupted by modern disc-world media, knew the ancient truth about their world.">
  <p style="font-size:130%;">
    But that's not all: imagine standing at some arbitrary point on the disc, say, somewhere between the middle and the edge.
    Disc-world literature foolishly paints this as a perfectly normal experience, with gravity pulling adventurous travellers straight down,
    towards the disc soil under their feet, like gravity does to you right now.
    But gravity typically pulls you towards <i>where there is a lot of mass</i>, and when you're not in the center of disc-world,
    there's a lot more mass on one side than on the other.
  </p>
  <img src="./img/flat_earth/alotofmass.png" style="width:30%">
  <p style="font-size:130%;">
    This is troubling, because it means that at least in theory, everywhere on disc-world except its center,
    there should be a component of the gravity force which pulls you <i>sideways</i>.
    This makes sense, intuitively: remember our brave hero standing on the edge of the disc world?
    Well, on his way there, gravity couldn't just have switched from <i>straight down</i> to <i>fully sideways</i> all at once.
    Which means, at some point, before going over the edge, he had to feel like he was climbing a very steep slope.
    But this weird effect should only be felt very close to the edge of the disc, right?
    Surely on most of the disc, folk are safely pulled straight down, with the small sideways force almost imperceptible,
    like disc-world texts imply.
    After all, it is reasonable to stand up straight, and it is said that disc world folk are very reasonable people.
  </p>
  <p style="font-size:130%;">
    Or... are they?
  </p>
<!--   TODO draw the experience of the traveller, where the ground is tilted as he moves. -->
<!--   left: house, ground, tree, flat. Middle: house, ground, tree, tilted. Person is puzzled -->
  <img src="./img/flat_earth/weirdoes.png" style="width:40%">
  <p style="font-size:130%;">
    At this point, I realized that I had no clue how strong this effect would be for most of the disc inhabitants.
    Would this side-force be mere thousandth of a g, almost imperceptible to inhabitants almost all the way to the edge?
    Or would it be quite strong, relatively to the main <i>down</i> component of the <i>force de pesanteur</i> ?
    In other words, would the world feel flat pretty much everywhere, or would it feel like a steep slope?
  </p>
  <img src="./img/flat_earth/weakorstrong.png" style="width:100%">
  <p style="font-size:130%;">
    To answer this question, we need to figure out the angle of the gravity field vector along the disc surface.
  </p>
  <h3>Newtonian Gravity on A Flat Disc</h3>
  <p style="font-size:130%;">
    <i>This section is mostly theory and math. In a hurry? Skip it and go straight to the results.</i>
  </p>
  <button type="button" class="collapsible">Show me the math!</button>
  <div class="content">
    <p style="font-size:130%;">
      First, let's recall the Newtonian theory of gravity:
      the gravitational force exerted by a point-like object on another point-like object is
    </p>
    <img src="./img/flat_earth/math_f_gravity.png">
    <p style="font-size:130%;">
      where m1 and m2 are the two object masses,
      G is a cosmological constant,
      and d is the distance between the two objects.
      (By point-like, we mean that the two are far enough apart that ||d|| is much bigger than the object sizes.)
    </p>
    <p style="font-size:130%;">
      To make simulation simpler, it would be nice to separate the x, y, and z dimensions.
      After all, the force F can be described as the combination of its x, y, and z components.
    </p>
    <img src="./img/flat_earth/math_f_vector.png">
    <p style="font-size:130%;">
      And the distance d between an object pair can be written as
    </p>
    <img src="./img/flat_earth/math_d_norm.png">
    <p style="font-size:130%;">
      We also know that the force F points in the same direction as the vector d, which means that
    </p>
    <img src="./img/flat_earth/math_dx_d_eq_fx_f.png">
    <p style="font-size:130%;">
      therefore
    </p>
    <img src="./img/flat_earth/math_fx.png">
<!--   F_x = \frac{d_x}{||\overrightarrow{d}||} * ||\overrightarrow{F}|| = \frac{d_x}{||\overrightarrow{d}||} * \frac{G m_1 m_2}{||\overrightarrow{d}||^2} = G m_1 m_2 \frac{d_x}{||\overrightarrow{d}||^3} -->
    <p style="font-size:130%;">
      (The same holds true for F<sub>y</sub>, F<sub>z</sub>.)
    </p>
    <p style="font-size:130%;">
      What's more, the gravitation force adds up nicely when there are more objects present.
      Of course, in the real world, things are continuous, and solving this means going through double, even triple integrals.
      Here comes discretization to the rescue. Given a high enough resolution, if we model our space and disc
      as a bunch of voxels (that is, 3d pixels), then we can treat each voxel as a constant-mass-and-density
      object, and easily sum up their interactions. This gives a rather good approximation of the continuous field.
    </p>
<!-- F^o_x = F^{o,v1}_x + F^{o,v2}_x + ... = G m_o m_{v1} \frac{d_x^{o,v1}}{||\overrightarrow{d}^{o,v1}||^3} + G m_o m_{v2} \frac{d_x^{o,v2}}{||\overrightarrow{d}^{o,v2}||^3} + ... -->
    <img src="./img/flat_earth/math_f_vox_sum.png">
    <p style="font-size:130%;">
      here, the force felt by our observer (o) is the sum of forces exerted by each voxel (v1, v2, ..., vn),
      d<sup>o,v1</sup> is the distance vector from the observer to the voxel v1,
      m<sub>v1</sub>, m<sub>v2</sub>, etc... are the masses of each voxel.
    </p>
    <p style="font-size:130%;">
      given the constant-mass-and-density approximation, m<sub>v1</sub>, m<sub>v2</sub>, etc... are all equal to some mass m<sub>vox</sub>
      thus we can write F<sub>x</sub> as
    </p>
    <img src="./img/flat_earth/math_f_sum_nvox.png">
    <p style="font-size:130%;">
      Perfect! This equation makes it easy to simulate the force felt by any observer, at any point:
      calculate d<sub>x</sub> d<sub>y</sub>, d<sub>z</sub> between every point in the simulation grid and every occupied voxels.
    </p>
    <div style="background: #ffffff; overflow:auto;width:auto;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">
    dx <span style="color: #333333">=</span> ox[<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,:] <span style="color: #333333">-</span> xx[:,:,:,<span style="color: #007020">None</span>]
    dy <span style="color: #333333">=</span> oy[<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,:] <span style="color: #333333">-</span> yy[:,:,:,<span style="color: #007020">None</span>]
    dz <span style="color: #333333">=</span> oz[<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,:] <span style="color: #333333">-</span> zz[:,:,:,<span style="color: #007020">None</span>]
    </div>
    <p style="font-size:130%;">
      this gives you three big arrays, of shape (X, Y, Z, N<sub>occupied voxels</sub>)
      We can combine them to get the norm of d at every point.
    </p>
    <div style="background: #ffffff; overflow:auto;width:auto;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">
    d <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sqrt(dx <span style="color: #333333">*</span> dx <span style="color: #333333">+</span> dy <span style="color: #333333">*</span> dy <span style="color: #333333">+</span> dz <span style="color: #333333">*</span> dz)
    </div>
    <p style="font-size:130%;">
      Now we can obtain the force at every point caused by every voxel by using the equation.
    </p>
    <div style="background: #ffffff; overflow:auto;width:auto;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">
    fx <span style="color: #333333">=</span> dx <span style="color: #333333">/</span> d <span style="color: #333333">*</span> G <span style="color: #333333">/</span> d<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>
    fy <span style="color: #333333">=</span> dy <span style="color: #333333">/</span> d <span style="color: #333333">*</span> G <span style="color: #333333">/</span> d<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>
    fz <span style="color: #333333">=</span> dz <span style="color: #333333">/</span> d <span style="color: #333333">*</span> G <span style="color: #333333">/</span> d<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>
    </div>
    <p style="font-size:130%;">
      Finally, we sum over the occupied voxels to get the total force experienced at every point.
    </p>
    <div style="background: #ffffff; overflow:auto;width:auto;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">
    fx <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sum(fx, axis<span style="color: #333333">=-</span><span style="color: #0000DD; font-weight: bold">1</span>)
    fy <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sum(fy, axis<span style="color: #333333">=-</span><span style="color: #0000DD; font-weight: bold">1</span>)
    fz <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sum(fz, axis<span style="color: #333333">=-</span><span style="color: #0000DD; font-weight: bold">1</span>)
    </div>
    <div style="background-color: LightGrey">
    <p style="font-size:130%;">
      <b>Note</b>
      given these simplifications, we can already notice an interesting peculiarity about the angle of the gravity field
      around some massive object.
      For example, let's fix the y coordinate, taking a cross-cut in the middle of our object,
      which implies F<sub>y</sub> = 0.
      Now say we care about the angle theta of gravity at an arbitrary point on this cross-cut.
      According to trigonometry,
    </p>
<!--     tan(theta) = F_z / F_x -->
    <p style="font-size:130%;">
      which is
    </p>
<!-- \tan{\theta} = \frac{ F^o_z }{ F^o_x} = \frac{ G m_o m_{v}  \sum_{i}^{n_{voxels}} \frac{d^{o,vi}_z}{||\overrightarrow{d}^{o,vi}||^3} }{ G m_o m_{v}  \sum_{i}^{n_{voxels}} \frac{d^{o,vi}_x}{||\overrightarrow{d}^{o,vi}||^3} } -->
    <img src="./img/flat_earth/math_tan_theta.png">
    <p style="font-size:130%;">
      We see that the constant terms outside the sum cancel out! This leads us to our first discovery:
      Given constant density throughout the disc, the angle of gravity at some latitude on our disc
      depends <b>only on the geometric shape</b>, not the scale (bigger disc, same result), nor the mass (denser soil everywhere, same result),
      nor the constant of gravity G.
      Pretty neat!
    </p>
    </div>
  </div> 
  <h3>Results</h3>
  <p style="font-size:130%;">
    Thankfully, it was easier than it seemed to write a discretized gravity-field simulator using numpy,
    and what's more, it can calculate the gravity field for any arbitratry 3d shape! For the details, scroll to the bottom.
    Going back to our question, here are the results of simulation for the flat disc case:
  </p>
  <img src="./img/flat_earth/flat_disc_g_field.svg" style="width:100%">
  <p style="font-size:130%;">
    It turns out that this effect is quite significant!
    Inhabitants living halfway to the edge of the ring from the middle would already have to stand tilted to stay up.
  </p>
  <img src="./img/flat_earth/thetacontours.png" style="width:40%">
  <h4>
    <i>The angle at the disc equator is ~15 degrees.</i>
  </h4>
  <p style="font-size:130%;">
    As we showed in the math section above, this tilt angle is not dependent on the gravitational constant. Only the disc geometry.
    The density is also not a factor: you can't make the effect go away by building a bigger disc.
    So, a person living halfway to the disc edge from center will always be tilted by the same angle,
    <i>no matter the disc radius.</i> (as long as it remains a disc, i.e. much thinner than it is wide)
  </p>
  <h3>Life on a Flat Disc</h3>
  <p style="font-size:130%;">
    <i>What would everyday life be like, on this gravitationally accurate disc world?</i>
  </p>
<!--   TODO howdy neighbor tilted inhabitant. 15deg slant. Note that this is a 25-30% grade, about as much as a ski slope -->
  <p style="font-size:130%;">
    First, it would feel like the whole disc is tilting under your feet, like an undending steep slope.
    And looking back, the downhill slope would be the <i>previously flat</i> surface you had walked on.
    By the time you reached the edge, you would basically be rock-climbing,
    the straight wall in front of you extending straight down for miles, all the way to the disc's other edge.
  </p>
  <img src="./img/flat_earth/climbing.png" style="width:60%">
<p style="font-size:130%;">
    In fact, if at that point you accidentally dropped, say, a rubber ball from your pocket,
    it would roll and roll straight down, past the center of the disc, slow down, and roll back the other way,
    this would repeat, slower and slower due to friction, until it would stop, smack in the middle of the disc.
    In other words it would <i>feel</i> like being on the inside of a gigantic bowl, but it would <i>look</i> flat.
    (Except, of course for forests, hills, rivers, mountains.)
  </p>
  <img src="./img/flat_earth/rubberballs.png" style="width:60%">
<p style="font-size:130%;">
    This also has interesting implications for geography and geology of our disc world: rivers will tend to flow towards the middle.
    Of course, exceptions could exist in the case of local mountains or hills. 
    Still, the trend of water flowing towards the middle means that a sea there would be very likely.
    (Fun fact: a large sea in the middle of our disc-world would naturally have to bulge up, due to the sideways forces of gravity.)
    This makes the situation even steeper! Most of the inhabitable area of the disc is already in the 15degree+ zone.
    Adding a sea in the middle would ensure that almost <i>all</i> inhabitants of disc-world live in steep to very steep regions.
  </p>
  <img src="./img/flat_earth/middlesea.png" style="width:60%">
<p style="font-size:130%;">
    And it doesn't stop there,
    According to Guiness World Record, the steepest road in the world has a 34% grade (less than 20 degrees!).
    The steepest railway line in the world is 13.5% (around 8 degrees), which means that as we move away from the center,
    disc-world pretty quickly requires s shaped railway, funiculars, and mountain-like roads.
  </p>
  <img src="./img/flat_earth/regions.png" style="width:100%">
<p style="font-size:130%;">
    Edge regions would be almost uninhabitable without advanced industry, and transportation there
    would look more like cable-cars and ladders than roads and stairways.
  </p>
  <h4>
    <i>"But what if the disc was denser in the middle? They say the earth has a dense iron core. Wouldn't this break our constant-density assumption? The simulation would be wrong?"</i>
  </h4>
  <p style="font-size:130%;">
    Well, yes. Here's what's neat about it, though: the constant density model actually gives us a 'best case', compared to a denser-in-the-middle disc.
    Think about it: a disc which is denser in the middle means that the side force, pulling you towards the center is <i>even stronger</i>.
    The tilt angle would be even worse throughout!
  </p>
  <p style="font-size:130%;">
    Then there's the fact matter on the disc's edge would tend move towards the center, through erosion,
    rolling stones, wind, or whatever else. Over millions of years, unless it was made of some formidable material,
    the disc would get thicker in the middle, and erode at the ends, eventually turning into a sphere.
  </p>
  <p style="font-size:130%;">
    And of course, since we built a strange-world gravity field calculator, it would be a shame not to put it to use.
    Here are the gravity fields for cube-world, square-disc-world, and line-world.
  </p>
  <img src="./img/flat_earth/3dshapes.png" style="width:100%">
  <img src="./img/flat_earth/shapes_g_field.svg" style="width:100%">
  <p style="font-size:130%;">
    Notice that for uniform hollow objects, the simulated gravity field on the inside is 0.
    This result is predicted by Gauss' law for gravity, and it's reassuring to see that the simulator produces the predicted result.
  </p>
<p style="font-size:130%;">
    The strange physics of these imaginary worlds could inspire fantastic stories. Imagine a fortress
    at the edge of the disc-world, almost impossible to reach, as it would require climbing an increasingly steeper hill
    for miles and miles. It would take a several-year-long, arduous trip and the challenges along the way would be numerous,
    through increasingly strange landscapes and improbable settlements.
    (If that sounds cool to you, check out <i>La Horde du Contrevent</i> by Alain Damasio)
  </p>
  <h3>Gravity Field Simulator</h3>
  <p style="font-size:130%;">
    This implementation is not memory-efficient at all, but it's good enough.
  </p>

  <!-- Code snippet -->
  <div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">
  <span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">__future__</span> <span style="color: #008800; font-weight: bold">import</span> print_function

  <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">numpy</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">np</span>
  <span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">matplotlib</span> <span style="color: #008800; font-weight: bold">import</span> pyplot <span style="color: #008800; font-weight: bold">as</span> plt
  <span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pyniel.pyplot_tools.plot</span> <span style="color: #008800; font-weight: bold">import</span> gridshow

  <span style="color: #DD4422">&quot;&quot;&quot; Visualizing 3D gravity fields for arbitrary voxel shapes</span>

  <span style="color: #DD4422">What does the gravity field on a flat disc look like?</span>
  <span style="color: #DD4422">am I attracted to the disc C.O.G wherever I go?</span>
  <span style="color: #DD4422">Or to the disc surface, like if I was wearing magnetic boots?</span>
  <span style="color: #DD4422">Which one and why?</span>
  <span style="color: #DD4422">&quot;&quot;&quot;</span>

  shape <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;flat disc&quot;</span>

  <span style="color: #888888"># create space</span>
  N <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">20</span>
  x <span style="color: #333333">=</span> np<span style="color: #333333">.</span>arange(<span style="color: #333333">-</span>N, N)
  y <span style="color: #333333">=</span> np<span style="color: #333333">.</span>arange(<span style="color: #333333">-</span>N, N)
  z <span style="color: #333333">=</span> np<span style="color: #333333">.</span>arange(<span style="color: #333333">-</span>N, N)
  yy, xx, zz <span style="color: #333333">=</span> np<span style="color: #333333">.</span>meshgrid(y, x, z)

  <span style="color: #888888"># cosmological constants</span>
  G <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
  <span style="color: #888888"># all pixel weights = 1</span>

  <span style="color: #888888"># occupied pixels</span>
  <span style="color: #008800; font-weight: bold">if</span> shape <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;cube&quot;</span>:
      L <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">5</span>
      occ <span style="color: #333333">=</span> np<span style="color: #333333">.</span>logical_and<span style="color: #333333">.</span>reduce([np<span style="color: #333333">.</span>abs(xx) <span style="color: #333333">&lt;</span> L, np<span style="color: #333333">.</span>abs(yy) <span style="color: #333333">&lt;</span> L, np<span style="color: #333333">.</span>abs(zz) <span style="color: #333333">&lt;</span> L])
  <span style="color: #008800; font-weight: bold">elif</span> shape <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;flat square&quot;</span>:
      L <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">15</span>
      H <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
      occ <span style="color: #333333">=</span> np<span style="color: #333333">.</span>logical_and<span style="color: #333333">.</span>reduce([np<span style="color: #333333">.</span>abs(xx) <span style="color: #333333">&lt;</span> L, np<span style="color: #333333">.</span>abs(yy) <span style="color: #333333">&lt;</span> L, np<span style="color: #333333">.</span>abs(zz) <span style="color: #333333">&lt;</span> H])
  <span style="color: #008800; font-weight: bold">elif</span> shape <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;flat disc&quot;</span>:
      R <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">15</span>
      H <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>
      occ <span style="color: #333333">=</span> np<span style="color: #333333">.</span>logical_and(np<span style="color: #333333">.</span>sqrt(xx<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span> <span style="color: #333333">+</span> yy<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>) <span style="color: #333333">&lt;</span> R, np<span style="color: #333333">.</span>abs(zz) <span style="color: #333333">&lt;</span> H)
  <span style="color: #008800; font-weight: bold">elif</span> shape <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;line strip&quot;</span>:
      L <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">15</span>
      occ <span style="color: #333333">=</span> np<span style="color: #333333">.</span>logical_and(<span style="color: #007020">abs</span>(yy) <span style="color: #333333">+</span> <span style="color: #007020">abs</span>(zz) <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>, np<span style="color: #333333">.</span>abs(xx) <span style="color: #333333">&lt;</span> L)
  <span style="color: #008800; font-weight: bold">elif</span> shape <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;hollow sphere&quot;</span>:
      r <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">13</span>
      R <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">15</span>
      rr <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sqrt(xx<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span> <span style="color: #333333">+</span> yy<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span> <span style="color: #333333">+</span> zz<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>)
      occ <span style="color: #333333">=</span> np<span style="color: #333333">.</span>logical_and(rr <span style="color: #333333">&lt;</span> R, rr <span style="color: #333333">&gt;=</span> r)
  <span style="color: #008800; font-weight: bold">elif</span> shape <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;hollow cube&quot;</span>:
      S <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">10</span>
      s <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">8</span>
      nn <span style="color: #333333">=</span> np<span style="color: #333333">.</span>maximum<span style="color: #333333">.</span>reduce([np<span style="color: #333333">.</span>abs(xx), np<span style="color: #333333">.</span>abs(yy), np<span style="color: #333333">.</span>abs(zz)])
      occ <span style="color: #333333">=</span> np<span style="color: #333333">.</span>logical_and(nn <span style="color: #333333">&lt;</span> S, nn <span style="color: #333333">&gt;=</span> s)

  oi, oj, ok <span style="color: #333333">=</span> np<span style="color: #333333">.</span>where(occ)
  ox <span style="color: #333333">=</span> x[oi]
  oy <span style="color: #333333">=</span> y[oj]
  oz <span style="color: #333333">=</span> z[ok]


  <span style="color: #888888"># force from each pixel to each other pixel</span>
  dx <span style="color: #333333">=</span> ox[<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,:] <span style="color: #333333">-</span> xx[:,:,:,<span style="color: #007020">None</span>]
  dy <span style="color: #333333">=</span> oy[<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,:] <span style="color: #333333">-</span> yy[:,:,:,<span style="color: #007020">None</span>]
  dz <span style="color: #333333">=</span> oz[<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,<span style="color: #007020">None</span>,:] <span style="color: #333333">-</span> zz[:,:,:,<span style="color: #007020">None</span>]
  d <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sqrt(dx <span style="color: #333333">*</span> dx <span style="color: #333333">+</span> dy <span style="color: #333333">*</span> dy <span style="color: #333333">+</span> dz <span style="color: #333333">*</span> dz)
  d[d <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> np<span style="color: #333333">.</span>inf
  fx <span style="color: #333333">=</span> dx <span style="color: #333333">/</span> d <span style="color: #333333">*</span> G <span style="color: #333333">/</span> d<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>
  fy <span style="color: #333333">=</span> dy <span style="color: #333333">/</span> d <span style="color: #333333">*</span> G <span style="color: #333333">/</span> d<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>
  fz <span style="color: #333333">=</span> dz <span style="color: #333333">/</span> d <span style="color: #333333">*</span> G <span style="color: #333333">/</span> d<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>
  fx <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sum(fx, axis<span style="color: #333333">=-</span><span style="color: #0000DD; font-weight: bold">1</span>)
  fy <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sum(fy, axis<span style="color: #333333">=-</span><span style="color: #0000DD; font-weight: bold">1</span>)
  fz <span style="color: #333333">=</span> np<span style="color: #333333">.</span>sum(fz, axis<span style="color: #333333">=-</span><span style="color: #0000DD; font-weight: bold">1</span>)

  fig, axes <span style="color: #333333">=</span> plt<span style="color: #333333">.</span>subplots(<span style="color: #0000DD; font-weight: bold">2</span>,<span style="color: #0000DD; font-weight: bold">2</span>)
  plt<span style="color: #333333">.</span>sca(axes[<span style="color: #0000DD; font-weight: bold">0</span>,<span style="color: #0000DD; font-weight: bold">0</span>])
  plt<span style="color: #333333">.</span>title(<span style="background-color: #fff0f0">&quot;Front&quot;</span>)
  <span style="color: #888888"># 2D front (X-Z) section</span>
  gridshow(occ[:,N,:], extent<span style="color: #333333">=</span>[x[<span style="color: #0000DD; font-weight: bold">0</span>], x[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>], z[<span style="color: #0000DD; font-weight: bold">0</span>],z[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]])
  plt<span style="color: #333333">.</span>quiver(xx[:,N,:], zz[:,N,:], fx[:,N,:], fz[:,N,:])
  plt<span style="color: #333333">.</span>xlabel(<span style="background-color: #fff0f0">&#39;x&#39;</span>)
  plt<span style="color: #333333">.</span>ylabel(<span style="background-color: #fff0f0">&#39;z&#39;</span>)

  plt<span style="color: #333333">.</span>sca(axes[<span style="color: #0000DD; font-weight: bold">0</span>,<span style="color: #0000DD; font-weight: bold">1</span>])
  plt<span style="color: #333333">.</span>title(<span style="background-color: #fff0f0">&quot;Right&quot;</span>)
  <span style="color: #888888"># 2D right (Y-Z) section</span>
  gridshow(occ[N,:,:], extent<span style="color: #333333">=</span>[y[<span style="color: #0000DD; font-weight: bold">0</span>], y[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>], z[<span style="color: #0000DD; font-weight: bold">0</span>],z[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]])
  plt<span style="color: #333333">.</span>quiver(yy[N,:,:], zz[N,:,:], fy[N,:,:], fz[N,:,:])
  plt<span style="color: #333333">.</span>xlabel(<span style="background-color: #fff0f0">&#39;y&#39;</span>)
  plt<span style="color: #333333">.</span>ylabel(<span style="background-color: #fff0f0">&#39;z&#39;</span>)

  plt<span style="color: #333333">.</span>sca(axes[<span style="color: #0000DD; font-weight: bold">1</span>,<span style="color: #0000DD; font-weight: bold">0</span>])
  plt<span style="color: #333333">.</span>title(<span style="background-color: #fff0f0">&quot;Top&quot;</span>)
  <span style="color: #888888"># 2D top (X-Y) section</span>
  gridshow(occ[:,:,N], extent<span style="color: #333333">=</span>[x[<span style="color: #0000DD; font-weight: bold">0</span>], x[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>], y[<span style="color: #0000DD; font-weight: bold">0</span>], y[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]])
  plt<span style="color: #333333">.</span>quiver(xx[:,:,N], yy[:,:,N], fx[:,:,N], fy[:,:,N])
  plt<span style="color: #333333">.</span>xlabel(<span style="background-color: #fff0f0">&#39;x&#39;</span>)
  plt<span style="color: #333333">.</span>ylabel(<span style="background-color: #fff0f0">&#39;y&#39;</span>)

  fig<span style="color: #333333">.</span>delaxes(ax<span style="color: #333333">=</span>axes[<span style="color: #0000DD; font-weight: bold">1</span>,<span style="color: #0000DD; font-weight: bold">1</span>])
  plt<span style="color: #333333">.</span>show()

  <span style="color: #888888"># slant angle at mid-latitude</span>
  equator_slant <span style="color: #333333">=</span> np<span style="color: #333333">.</span>arctan2(fx[<span style="color: #0000DD; font-weight: bold">27</span>,<span style="color: #0000DD; font-weight: bold">20</span>,<span style="color: #0000DD; font-weight: bold">21</span>], fz[<span style="color: #0000DD; font-weight: bold">27</span>,<span style="color: #0000DD; font-weight: bold">20</span>,<span style="color: #0000DD; font-weight: bold">21</span>]) <span style="color: #333333">*</span> <span style="color: #0000DD; font-weight: bold">180</span> <span style="color: #333333">/</span> np<span style="color: #333333">.</span>pi <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">180</span>

  <span style="color: #888888"># slant angle at mid-latitude</span>
  edge_slant <span style="color: #333333">=</span> np<span style="color: #333333">.</span>arctan2(fx[<span style="color: #0000DD; font-weight: bold">35</span>,<span style="color: #0000DD; font-weight: bold">20</span>,<span style="color: #0000DD; font-weight: bold">21</span>], fz[<span style="color: #0000DD; font-weight: bold">35</span>,<span style="color: #0000DD; font-weight: bold">20</span>,<span style="color: #0000DD; font-weight: bold">21</span>]) <span style="color: #333333">*</span> <span style="color: #0000DD; font-weight: bold">180</span> <span style="color: #333333">/</span> np<span style="color: #333333">.</span>pi <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">180</span>
  </pre></div>
  <!--   Code snippet end -->

<p style="font-size:130%;">
  </p>
  Note: No affiliation to xkcd or Randall Munroe. I just can't draw anything more complicated than a stick figure.


</div>

<!-- End Page Content -->
</div>


<!-- Javascript -->
<style>
.content {
  padding: 0 18px;
  background-color: white;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
}
</style>
<script>
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    }
  });
}
</script>

<!-- Footer -->
<footer class="w3-container w3-padding-64 w3-light-grey w3-center w3-large">
  <!-- Font awesome logos: fa fa-something-something -->
  <i class="fab fa-pied-piper-alt w3-hover-opacity"></i>
  <p>Powered by <a  id="powered_by_link" href="http://beesbeesbees.com/" target="_blank" class="w3-hover-text-green">bees</a></p>

  <script>
  var powerSources = [
    "bees",
    "eels",
    "koalas",
    "circuits",
    "logic",
    "a chihuaha",
    "infinite zoom",
    ];
  var powerLinks = [
    "http://beesbeesbees.com/",
    "http://eelslap.com",
    "http://koalastothemax.com",
    "http://electricboogiewoogie.com",
    "http://www.visual6502.org/JSSim/index.html",
    "http://chihuahuaspin.com/",
    "http://zoomquilt.org/",
    ];
  var randomIndex = Math.floor(Math.random()*powerSources.length);
  document.getElementById("powered_by_link").href = powerLinks[randomIndex];
  document.getElementById("powered_by_link").innerHTML = powerSources[randomIndex];
  </script>
</footer>

</body>
</html>
